<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stepper</title>

    <link rel="stylesheet" href="css/stepper.css">
</head>
<body>
    <div class="container">
        <div class="steps">
            <span class="circle active">1</span>
            <span class="circle">2</span>
            <span class="circle">3</span>
            <span class="circle">4</span>
            <div class="progress-bar">
                <span class="indicator"></span>
            </div>
        </div>
        <div class="buttons">
            <button id="prev" disabled>Prev</button>
            <button id="next">Next</button>
        </div>
    </div>


    <script defer>
        //DOM ELEMENST
        const circles = document.querySelectorAll(".circle"),
        progressBar = document.querySelectorAll(".indicator"),
        buttons = document.querySelectorAll("button");
        let currentStep = 1;

        //function that updates the current step and update of the DOm
        const updateSteps = (e) => {

            //update the curremt step based on the button clicked
            currentStep = e.target.id === "next" ? ++currentStep : --currentStep;
            
            //loop through circles and add/remove  active class based on their index
            circles.forEach((circle, index) => {
                circle.classList[`${index < currentStep ? "add" : "remove"}`]("active");
            });

            //update progress bar width based on current step
            // progressBar.style.width = `${((currentStep - 1) / (circles.length - 1)) * 100}%`
        
            //check if the step is last or first step and disable buttons
            if (currentStep === circles.length)
            {
                buttons[1].disabled = true;
            } else if (currentStep === 1)
            {
                buttons[0].disabled = true;
            }else
            {
                buttons.forEach((button) => (button.disabled = false));
            }
        };
        //add click event listeners to all buttons
        buttons.forEach(button => {
            button.addEventListener("click", updateSteps)
        });

    </script>
</body>
</html>